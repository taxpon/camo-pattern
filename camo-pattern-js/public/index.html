<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>
	<title>Camouflage Pattern JS</title>
<!--	<link rel='icon' type='image/png' href='images/favicon.ico'>-->
<!--	<link rel='stylesheet' href='global.css'>-->
<!--	<link rel='stylesheet' href='build/bundle.css'>-->
	<script defer type="module" src='build/lib/camo-pattern.js'></script>
	<style>
		canvas {
			margin: 200px;
			transition: transform .05s ease-out 0s;
		}
		canvas:hover {
			transform: scale(1.04, 1.04);
		}
	</style>
</head>
<body>
	<div style="display: flex;">
		<div>
			<canvas width="400" height="400" id="camo" style="border: 1px solid black;"></canvas>
		</div>
		<div>
			<canvas width="200" height="200" id="camo2"></canvas>
			<div>
				<button id="refresh2">refresh</button>
			</div>
		</div>
	</div>
	<script id="vertex-shader-2d" type="notjs">
	  // an attribute will receive data from a buffer
	  attribute vec4 a_position;
	  attribute vec4 a_vertex_color;

	  varying lowp vec4 v_color;

	  // all shaders have a main function
	  void main() {

		// gl_Position is a special variable a vertex shader
		// is responsible for setting
		gl_Position = a_position;
		v_color = a_vertex_color;
	  }
	</script>
	<script id="fragment-shader-2d" type="notjs">
	  // fragment shaders don't have a default precision so we need
	  // to pick one. mediump is a good default
	  precision mediump float;
	  uniform vec4 u_color;
	  varying lowp vec4 v_color;

	  void main() {
		// gl_FragColor is a special variable a fragment shader
		// is responsible for setting
		gl_FragColor = v_color;
	  }

	</script>
	<script defer type="module">
		import {CamoPattern} from "./build/lib/camo-pattern.js";
		let canvas = document.getElementById("camo");
		let vertexShaderSource = document.querySelector("#vertex-shader-2d").text;
		let fragmentShaderSource = document.querySelector("#fragment-shader-2d").text;

		let c = new CamoPattern(canvas, true);
		let program = c.webGLConfigure(vertexShaderSource, fragmentShaderSource);
		console.log(program);

		// let canvas = document.getElementById("camo");
		// let canvas2 = document.getElementById("camo2");
		// let c = new CamoPattern(canvas);
		// let c2 = new CamoPattern(canvas2);
		// c2.colors = ["#FF0000", "#00FF00", "#0000FF", '#FFFFFF']
		// c.draw();
		// c.mouseTrackEnabled = true;
		// c2.draw();
		// c.startAnimate();
		// document.getElementById("refresh").onclick = () => {
		// 	c.draw();
		// }
		// document.getElementById("refresh2").onclick = () => {
		// 	c2.draw();
		// }
		// canvas.onmousemove = c.handleMouseMove.bind(c);
	</script>

</body>
</html>
